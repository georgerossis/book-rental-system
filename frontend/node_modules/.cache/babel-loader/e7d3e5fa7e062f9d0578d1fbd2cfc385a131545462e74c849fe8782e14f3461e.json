{"ast":null,"code":"import axios from 'axios';\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\nconst authHeader = () => {\n  const token = localStorage.getItem('token');\n  return {\n    Authorization: `Bearer ${token}`\n  };\n};\nexport const rentalService = {\n  // Customer action: rent a book\n  rentBook: async (bookId, userId) => {\n    const res = await axios.post(`${API_BASE}/rentals`, {\n      bookId,\n      userId\n    }, {\n      headers: authHeader()\n    });\n    return res.data;\n  },\n  // Customer action: list own rentals\n  getUserRentals: async userId => {\n    const res = await axios.get(`${API_BASE}/rentals`, {\n      params: {\n        userId\n      },\n      headers: authHeader()\n    });\n    return res.data;\n  },\n  // Admin action: list all rentals\n  getAllRentals: async () => {\n    const res = await axios.get(`${API_BASE}/rentals`, {\n      headers: authHeader()\n    });\n    return res.data;\n  },\n  //Admin action: list user rental\n  getRentalsForUserAsAdmin: async userId => {\n    const res = await axios.get(`${API_BASE}/rentals`, {\n      params: {\n        userId\n      },\n      headers: authHeader()\n    });\n    return res.data;\n  },\n  // Return a rental (customer or admin)\n  returnRental: async rentalId => {\n    const res = await axios.post(`${API_BASE}/rentals/${rentalId}/return`, {}, {\n      headers: authHeader()\n    });\n    return res.data;\n  },\n  // Cancel a rental (e.g., admin or before pickup)\n  cancelRental: async rentalId => {\n    await axios.post(`${API_BASE}/rentals/${rentalId}/cancel`, {}, {\n      headers: authHeader()\n    });\n  }\n};","map":{"version":3,"names":["axios","API_BASE","process","env","REACT_APP_API_URL","authHeader","token","localStorage","getItem","Authorization","rentalService","rentBook","bookId","userId","res","post","headers","data","getUserRentals","get","params","getAllRentals","getRentalsForUserAsAdmin","returnRental","rentalId","cancelRental"],"sources":["C:/Users/rossi/Desktop/book-rental-system/frontend/src/services/rentalService.ts"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\n\nconst authHeader = () => {\n  const token = localStorage.getItem('token');\n  return { Authorization: `Bearer ${token}` };\n};\n\nexport type Rental = {\n  id: string;\n  userId: string;\n  bookId: string;\n  rentedAt: string;\n  dueAt?: string;\n  returnedAt?: string;\n  status: 'active' | 'returned' | 'canceled';\n};\n\nexport const rentalService = {\n  // Customer action: rent a book\n  rentBook: async (bookId: string, userId: string): Promise<Rental> => {\n    const res = await axios.post(\n      `${API_BASE}/rentals`,\n      { bookId, userId },\n      { headers: authHeader() }\n    );\n    return res.data;\n  },\n\n  // Customer action: list own rentals\n  getUserRentals: async (userId: string): Promise<Rental[]> => {\n    const res = await axios.get(`${API_BASE}/rentals`, {\n      params: { userId },\n      headers: authHeader(),\n    });\n    return res.data;\n  },\n\n  // Admin action: list all rentals\n  getAllRentals: async (): Promise<Rental[]> => {\n    const res = await axios.get(`${API_BASE}/rentals`, {\n      headers: authHeader(),\n    });\n    return res.data;\n  },\n\n  //Admin action: list user rental\n  getRentalsForUserAsAdmin: async (userId: string): Promise<Rental[]> => {\n  const res = await axios.get(`${API_BASE}/rentals`, {\n    params: { userId },\n    headers: authHeader(),\n  });\n  return res.data;\n},\n\n  // Return a rental (customer or admin)\n  returnRental: async (rentalId: string): Promise<Rental> => {\n    const res = await axios.post(\n      `${API_BASE}/rentals/${rentalId}/return`,\n      {},\n      { headers: authHeader() }\n    );\n    return res.data;\n  },\n\n  // Cancel a rental (e.g., admin or before pickup)\n  cancelRental: async (rentalId: string): Promise<void> => {\n    await axios.post(\n      `${API_BASE}/rentals/${rentalId}/cancel`,\n      {},\n      { headers: authHeader() }\n    );\n  },\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;AAE7E,MAAMC,UAAU,GAAGA,CAAA,KAAM;EACvB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,OAAO;IAAEC,aAAa,EAAE,UAAUH,KAAK;EAAG,CAAC;AAC7C,CAAC;AAYD,OAAO,MAAMI,aAAa,GAAG;EAC3B;EACAC,QAAQ,EAAE,MAAAA,CAAOC,MAAc,EAAEC,MAAc,KAAsB;IACnE,MAAMC,GAAG,GAAG,MAAMd,KAAK,CAACe,IAAI,CAC1B,GAAGd,QAAQ,UAAU,EACrB;MAAEW,MAAM;MAAEC;IAAO,CAAC,EAClB;MAAEG,OAAO,EAAEX,UAAU,CAAC;IAAE,CAC1B,CAAC;IACD,OAAOS,GAAG,CAACG,IAAI;EACjB,CAAC;EAED;EACAC,cAAc,EAAE,MAAOL,MAAc,IAAwB;IAC3D,MAAMC,GAAG,GAAG,MAAMd,KAAK,CAACmB,GAAG,CAAC,GAAGlB,QAAQ,UAAU,EAAE;MACjDmB,MAAM,EAAE;QAAEP;MAAO,CAAC;MAClBG,OAAO,EAAEX,UAAU,CAAC;IACtB,CAAC,CAAC;IACF,OAAOS,GAAG,CAACG,IAAI;EACjB,CAAC;EAED;EACAI,aAAa,EAAE,MAAAA,CAAA,KAA+B;IAC5C,MAAMP,GAAG,GAAG,MAAMd,KAAK,CAACmB,GAAG,CAAC,GAAGlB,QAAQ,UAAU,EAAE;MACjDe,OAAO,EAAEX,UAAU,CAAC;IACtB,CAAC,CAAC;IACF,OAAOS,GAAG,CAACG,IAAI;EACjB,CAAC;EAED;EACAK,wBAAwB,EAAE,MAAOT,MAAc,IAAwB;IACvE,MAAMC,GAAG,GAAG,MAAMd,KAAK,CAACmB,GAAG,CAAC,GAAGlB,QAAQ,UAAU,EAAE;MACjDmB,MAAM,EAAE;QAAEP;MAAO,CAAC;MAClBG,OAAO,EAAEX,UAAU,CAAC;IACtB,CAAC,CAAC;IACF,OAAOS,GAAG,CAACG,IAAI;EACjB,CAAC;EAEC;EACAM,YAAY,EAAE,MAAOC,QAAgB,IAAsB;IACzD,MAAMV,GAAG,GAAG,MAAMd,KAAK,CAACe,IAAI,CAC1B,GAAGd,QAAQ,YAAYuB,QAAQ,SAAS,EACxC,CAAC,CAAC,EACF;MAAER,OAAO,EAAEX,UAAU,CAAC;IAAE,CAC1B,CAAC;IACD,OAAOS,GAAG,CAACG,IAAI;EACjB,CAAC;EAED;EACAQ,YAAY,EAAE,MAAOD,QAAgB,IAAoB;IACvD,MAAMxB,KAAK,CAACe,IAAI,CACd,GAAGd,QAAQ,YAAYuB,QAAQ,SAAS,EACxC,CAAC,CAAC,EACF;MAAER,OAAO,EAAEX,UAAU,CAAC;IAAE,CAC1B,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}